
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>(Semi-)Automated Manipulations &#8212; ISOLDE 1.0b3.dev7 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Simulation Setup and Management" href="sim_management.html" />
    <link rel="prev" title="Restraints and Steering Forces" href="restraints.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="semi-automated-manipulations">
<h1>(Semi-)Automated Manipulations<a class="headerlink" href="scripted_manipulations.html#semi-automated-manipulations" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="scripted_manipulations.html#peptide-bond-flipper" id="id1">Peptide_Bond_Flipper</a></p></li>
<li><p><a class="reference internal" href="scripted_manipulations.html#protein-register-shifter" id="id2">Protein_Register_Shifter</a></p></li>
<li><p><a class="reference internal" href="scripted_manipulations.html#module-chimerax.isolde.refine" id="id3">Backrub</a></p></li>
</ul>
</div>
<span class="target" id="module-chimerax.isolde.manipulations"></span><div class="section" id="peptide-bond-flipper">
<h2><a class="toc-backref" href="scripted_manipulations.html#id1">Peptide_Bond_Flipper</a><a class="headerlink" href="scripted_manipulations.html#peptide-bond-flipper" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><img alt="../_images/pep-flip-icon.png" src="../_images/pep-flip-icon.png" />
<dl class="class">
<dt id="chimerax.isolde.manipulations.Peptide_Bond_Flipper">
<em class="property">class </em><code class="sig-prename descclassname">chimerax.isolde.manipulations.</code><code class="sig-name descname">Peptide_Bond_Flipper</code><span class="sig-paren">(</span><em class="sig-param">isolde</em>, <em class="sig-param">residue</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.manipulations.Peptide_Bond_Flipper" title="Permalink to this definition">¶</a></dt>
<dd><p>Responsible for flipping a peptide bond by adding temporary phi and psi
restraints 180 degrees away from their starting angles. Automatically
removes the restraints and deletes itself once satisfied, or when unable
to satisfy the restraints after a number of steps defined by
<code class="xref py py-attr docutils literal notranslate"><span class="pre">SimParams.peptide_flipper_max_rounds</span></code>. On failure, a warning is
printed to the ChimeraX log. If the restraints are satisfied to within
<code class="xref py py-attr docutils literal notranslate"><span class="pre">SimParams.dihedral_restraint_cutoff_angle</span></code> within the step limit,
a “polishing” phase is triggered in which the restraint cutoff angles are
reduced to zero and maintained for ten coordinate updates, at which point
the restraints are released. There is no real need to keep a handle to a
<a class="reference internal" href="scripted_manipulations.html#chimerax.isolde.manipulations.Peptide_Bond_Flipper" title="chimerax.isolde.manipulations.Peptide_Bond_Flipper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Peptide_Bond_Flipper</span></code></a> instance - just fire and forget.</p>
<dl class="method">
<dt id="chimerax.isolde.manipulations.Peptide_Bond_Flipper.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">isolde</em>, <em class="sig-param">residue</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.manipulations.Peptide_Bond_Flipper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialisation immediately starts the peptide flipping process. Adds a
handler to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">chimerax.AtomicStructure.triggers</span></code> ‘coord update’
trigger to check its progress and make decisions after each coordinate
update.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>isolde:</dt><dd><ul>
<li><p>the current <code class="xref py py-class docutils literal notranslate"><span class="pre">Isolde</span></code> session</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>residue:</dt><dd><ul>
<li><p>a currently-mobile <code class="xref py py-class docutils literal notranslate"><span class="pre">chimerax.Residue</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="protein-register-shifter">
<h2><a class="toc-backref" href="scripted_manipulations.html#id2">Protein_Register_Shifter</a><a class="headerlink" href="scripted_manipulations.html#protein-register-shifter" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><img alt="../_images/registershift-icon.png" src="../_images/registershift-icon.png" />
<dl class="class">
<dt id="chimerax.isolde.manipulations.Protein_Register_Shifter">
<em class="property">class </em><code class="sig-prename descclassname">chimerax.isolde.manipulations.</code><code class="sig-name descname">Protein_Register_Shifter</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">isolde</em>, <em class="sig-param">atoms</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter" title="Permalink to this definition">¶</a></dt>
<dd><p>In models built into low-resolution maps it is quite common to find
stretches of the protein chain that have been built out of register - that
is, the fold is more-or-less correct, but the residues are one or more
steps forward or backward along the chain from where they should be. It can
be a difficult and frustrating task to fix such problems via purely manual
methods, but a little scripting can help simplify the task substantially.</p>
<p><a class="reference internal" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter" title="chimerax.isolde.manipulations.Protein_Register_Shifter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Protein_Register_Shifter</span></code></a> addresses the task by first calculating
four 3D parametric splines (through the coordinates of the N, CA, C and
CB (or HA3 for glycine) atoms of the problem residues respectively). These
splines are then used to define the positions of position restraints for
each N, CA, C and CB, which move smoothly along the spline traversing one
register position for every ten coordinate updates. This provides a smooth
transition from starting to final positions, avoiding any risk of clashes
or excessive forces. When the traversal is finished the restraints will
remain in place until <a class="reference internal" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter.release_all" title="chimerax.isolde.manipulations.Protein_Register_Shifter.release_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">release_all()</span></code></a> is called, allowing the user to
check and correct local geometry before releasing.</p>
<p>Note that checkpointing of the simulation is blocked while a
<a class="reference internal" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter" title="chimerax.isolde.manipulations.Protein_Register_Shifter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Protein_Register_Shifter</span></code></a> is active. The block will be released
when <a class="reference internal" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter.release_all" title="chimerax.isolde.manipulations.Protein_Register_Shifter.release_all"><code class="xref py py-func docutils literal notranslate"><span class="pre">release_all()</span></code></a> is called.</p>
<dl class="method">
<dt id="chimerax.isolde.manipulations.Protein_Register_Shifter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">isolde</em>, <em class="sig-param">atoms</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise the object, including creating the splines from the current
coordinates. No restraints are applied at this stage.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>session:</dt><dd><ul>
<li><p>the ChimeraX master session object</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>isolde:</dt><dd><ul>
<li><p>the <code class="xref py py-class docutils literal notranslate"><span class="pre">Isolde</span></code> session</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>atoms:</dt><dd><ul>
<li><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">chimerax.AtomicStructure</span></code> instance. All atoms must
be mobile, and from a single contiguous stretch of peptide
chain. All unique residues in the selection will be chosen for
shifting</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="chimerax.isolde.manipulations.Protein_Register_Shifter.release_all">
<code class="sig-name descname">release_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter.release_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Release all restraints and clean up. Once this is run this object should
no longer be used.</p>
</dd></dl>

<dl class="method">
<dt id="chimerax.isolde.manipulations.Protein_Register_Shifter.shift_register">
<code class="sig-name descname">shift_register</code><span class="sig-paren">(</span><em class="sig-param">nres</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.manipulations.Protein_Register_Shifter.shift_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Shift the atoms in register by the given number of residues. A
positive nres yields a shift towards the C-terminus, while a
negative nres gives a shift towards the N-terminus. Residues that
fall off the end of the target region will become unrestrained,
while residues that enter the start will become restrained.</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>nres:</dt><dd><ul>
<li><p>an integer</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
<div class="section" id="module-chimerax.isolde.refine">
<span id="backrub"></span><h2><a class="toc-backref" href="scripted_manipulations.html#id3">Backrub</a><a class="headerlink" href="scripted_manipulations.html#module-chimerax.isolde.refine" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="chimerax.isolde.refine.apply_backrub">
<code class="sig-prename descclassname">refine.</code><code class="sig-name descname">apply_backrub</code><span class="sig-paren">(</span><em class="sig-param">mdff_mgr</em>, <em class="sig-param">residue</em>, <em class="sig-param">clash_weight=0.5</em>, <em class="sig-param">focus=False</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.refine.apply_backrub" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to automatically fit a protein sidechain into density using the
backrub algorithm (<a class="reference external" href="https://doi.org/10.1093/bioinformatics/btn169">https://doi.org/10.1093/bioinformatics/btn169</a>).</p>
<dl class="simple">
<dt>Args:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>isolde:</dt><dd><ul>
<li><p>pointer to the main ISOLDE session</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>mdff_mgr:</dt><dd><ul>
<li><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">MDFFMgr</span></code> object managing the map into which the
sidechain is to be fitted.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>residue:</dt><dd><ul>
<li><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">Residue</span></code> defining the residue to be fitted.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>clash_weight:</dt><dd><ul>
<li><p>weighting factor to apply to atomic clashes when scoring poses</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>focus:</dt><dd><ul>
<li><p>do we want to focus the view on the residue?</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="chimerax.isolde.refine.Backrub">
<em class="property">class </em><code class="sig-prename descclassname">chimerax.isolde.refine.</code><code class="sig-name descname">Backrub</code><span class="sig-paren">(</span><em class="sig-param">residue</em>, <em class="sig-param">density_map</em>, <em class="sig-param">clash_weight=0.1</em>, <em class="sig-param">map_weight=1</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.refine.Backrub" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically fit a protein sidechain into density using the
Backrub algorithm (Davis et al. 2006, Structure 14: 265-274)</p>
<dl class="method">
<dt id="chimerax.isolde.refine.Backrub.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">residue</em>, <em class="sig-param">density_map</em>, <em class="sig-param">clash_weight=0.1</em>, <em class="sig-param">map_weight=1</em><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.refine.Backrub.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare an amino acid residue for rotamer refitting, performing some
basic sanity checks along the way. When fitting, each pose will be
scored for both clashes with surrounding atoms and fit to density, with
user-adjustable weights.</p>
<p>Args:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>residue:</dt><dd><ul>
<li><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">chimerax.atomic.Residue</span></code> instance. Will raise a
<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code> if not a complete, rotameric amino acid
residue</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>density_map:</dt><dd><ul>
<li><p>a <code class="xref py py-class docutils literal notranslate"><span class="pre">chimerax.map.Volume</span></code> instance. If the residue does
not fall completely within the extent of the map, a
<code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code> will be raised.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>clash_weight (default=0.1):</dt><dd><ul>
<li><p>weight to apply to the clash term when scoring poses</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>map_weight (default=1):</dt><dd><ul>
<li><p>weight to apply to the density fit term when scoring poses</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="chimerax.isolde.refine.Backrub.auto_fit">
<code class="sig-name descname">auto_fit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="scripted_manipulations.html#chimerax.isolde.refine.Backrub.auto_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to automatically find the rotamer that best fits the density.
Will set the coordinates of the residue to the best solution it finds.
If you wish to be able to revert to the original coordinates, it’s up to
you to save them first.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../isolde.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../isolde.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/ISOLDE.html">The ISOLDE GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/isolde.html">The ISOLDE Command Line</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="isolde.html">ISOLDE Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gui_control.html">Accessing ISOLDE GUI functions from Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_objects.html">Core Dihedral Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="interpolation.html"><em>n</em>-Dimensional Interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="live_validation.html">Live Structure Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="restraints.html">Restraints and Steering Forces</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="scripted_manipulations.html#">(Semi-)Automated Manipulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sim_management.html">Simulation Setup and Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">General Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/citing.html">Citing ISOLDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/contact.html">Contact Info</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../isolde.html">Documentation overview</a><ul>
  <li><a href="isolde.html">ISOLDE Python API</a><ul>
      <li>Previous: <a href="restraints.html" title="previous chapter">Restraints and Steering Forces</a></li>
      <li>Next: <a href="sim_management.html" title="next chapter">Simulation Setup and Management</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2019, Tristan Croll.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/api/scripted_manipulations.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>